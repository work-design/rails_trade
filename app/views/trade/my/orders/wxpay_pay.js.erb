wx.ready(function() {
  wx.chooseWXPay({
    timestamp: '<%= @wxpay_order[:timeStamp] %>',
    nonceStr: '<%= @wxpay_order[:nonceStr] %>',
    package: '<%= @wxpay_order[:package] %>',
    signType: '<%= @wxpay_order[:signType] %>',
    paySign: '<%= @wxpay_order[:paySign] %>',
    success: function(res) {
      console.log(res)
      window.location.href = '<%= wait_my_order_url(@order) %>'
    },
    error: function(e) {
      alert(e)
    }
  })
})
